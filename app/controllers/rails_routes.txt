               Prefix Verb   URI Pattern                                   Controller#Action
                 root GET    /                                             pages#index
          search_lots GET    /lots/search(.:format)                        lots#search
   upload_lot_qcables POST   /lots/:lot_id/qcables/upload(.:format)        qcables#upload {lot_id: /[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/}
          lot_qcables POST   /lots/:lot_id/qcables(.:format)               qcables#create {lot_id: /[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/}
     lot_qc_decisions POST   /lots/:lot_id/qc_decisions(.:format)          lots_qc_decisions#create {lot_id: /[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/}
  new_lot_qc_decision GET    /lots/:lot_id/qc_decisions/new(.:format)      lots_qc_decisions#new {lot_id: /[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/}
                 lots POST   /lots(.:format)                               lots#create
              new_lot GET    /lots/new(.:format)                           lots#new
                  lot GET    /lots/:id(.:format)                           lots#show {id: /[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/}
       search_batches GET    /batches/search(.:format)                     batches#search
   batch_qc_decisions POST   /batches/:batch_id/qc_decisions(.:format)     batches_qc_decisions#create
new_batch_qc_decision GET    /batches/:batch_id/qc_decisions/new(.:format) batches_qc_decisions#new
                batch GET    /batches/:id(.:format)                        batches#show
                asset DELETE /asset(.:format)                              assets#destroy
    validation_stamps POST   /stamps/validation(.:format)                  stamps#validation
               stamps POST   /stamps(.:format)                             stamps#create
            new_stamp GET    /stamps/new(.:format)                         stamps#new
        search_robots GET    /robots/search(.:format)                      robots#search
         search_users GET    /users/search(.:format)                       users#search
     search_qc_assets GET    /qc_assets/search(.:format)                   qc_assets#search
            qc_assets POST   /qc_assets(.:format)                          qc_assets#create
         new_qc_asset GET    /qc_assets/new(.:format)                      qc_assets#new
  search_qc_decisions GET    /qc_decisions/search(.:format)                qc_decisions#search
         qc_decisions GET    /qc_decisions(.:format)                       qc_decisions#index
                      POST   /qc_decisions(.:format)                       qc_decisions#create
      new_qc_decision GET    /qc_decisions/new(.:format)                   qc_decisions#new
     edit_qc_decision GET    /qc_decisions/:id/edit(.:format)              qc_decisions#edit
          qc_decision GET    /qc_decisions/:id(.:format)                   qc_decisions#show
                      PATCH  /qc_decisions/:id(.:format)                   qc_decisions#update
                      PUT    /qc_decisions/:id(.:format)                   qc_decisions#update
                      DELETE /qc_decisions/:id(.:format)                   qc_decisions#destroy
                plate GET    /plates/:id(.:format)                         plates#show
                 tube GET    /tubes/:id(.:format)                          tubes#show
          submissions POST   /submissions(.:format)                        submissions#create
       barcode_labels POST   /barcode_labels(.:format)                     barcode_labels#create

Routes:

lots
qcables
qc decisions
batches
asset
stamps
robots
users
qc assets
plates
tubes
submissions
barcode labels

Pages:

--- Register lots ---
Register IDT tags lot
Register IDT reporters lot
Register tag 2 tubes lot
Register pre stamped tags lot
Register pre stamped tags - 384 lot
--> all v similar looking screens
- same partial, passes 'lot type' through as param

--- Other ---
View lot
Stamp plate
Create QC pool
Pass or fail plates
Destroy tag plates
--> all different looking screens, some with multiple steps (e.g. scan barcode first)


Also consider calls made when running config/generate

Views:

index
lots/new
lots/_register

Controllers:

application_controller (index)
- handles Sequencescape connection refused error
- holds api_connection_options

lots controller (lots/new)
- create - finds lot type, by name? uuid?
- create - creates a new lot under that lot type
- before new, finds user - api.search.find(Settings.searches['Find user by swipecard code']).first(swipecard_code:)
- before show, finds lot - api.lot.find
- show - initializes lot presenter - think no api calls
- new - initializes lot type presenter - think no api calls



SELECT lot_types.*, plate_purposes.name FROM sequencescape_snapshot.lot_types
JOIN plate_purposes ON plate_purposes.id = lot_types.target_purpose_id;
-- Tag Plate, Reporter Plate, Tag 2 Tube, Pre Stamped Tag Plate, Tag Plate - 384


SELECT lt.name, count(*), max(lots.created_at)
FROM lots 
JOIN lot_types lt ON lt.id = lots.lot_type_id
WHERE lots.created_at > '2020-07-01' -- last 5 years
GROUP BY lt.name
;

'IDT Tags','3','2025-05-12 14:43:34'
'Pre Stamped Tags','73','2025-07-14 07:27:45'
'Pre Stamped Tags - 384','5533','2025-05-09 11:25:41'

